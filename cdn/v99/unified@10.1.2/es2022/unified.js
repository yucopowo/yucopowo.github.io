/* esm.sh - esbuild bundle(unified@10.1.2) es2022 production */import{bail as z}from"/cdn/v99/bail@2.0.2/es2022/bail.js";import Y from"/cdn/v99/is-buffer@2.0.5/es2022/is-buffer.js";import C from"/cdn/v99/extend@3.0.2/es2022/extend.js";import E from"/cdn/v99/is-plain-obj@4.1.0/es2022/is-plain-obj.js";import{trough as _}from"/cdn/v99/trough@2.1.0/es2022/trough.js";import{VFile as q}from"/cdn/v99/vfile@5.3.6/es2022/vfile.js";var G=j().freeze(),T={}.hasOwnProperty;function j(){let t=_(),s=[],a={},m,g=-1;return n.data=I,n.Parser=void 0,n.Compiler=void 0,n.freeze=O,n.attachers=s,n.use=V,n.parse=F,n.stringify=N,n.run=L,n.runSync=B,n.process=U,n.processSync=D,n;function n(){let e=j(),r=-1;for(;++r<s.length;)e.use(...s[r]);return e.data(C(!0,{},a)),e}function I(e,r){return typeof e=="string"?arguments.length===2?(x("data",m),a[e]=r,n):T.call(a,e)&&a[e]||null:e?(x("data",m),a=e,n):a}function O(){if(m)return n;for(;++g<s.length;){let[e,...r]=s[g];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);let o=e.call(n,...r);typeof o=="function"&&t.use(o)}return m=!0,g=Number.POSITIVE_INFINITY,n}function V(e,...r){let o;if(x("use",m),e!=null)if(typeof e=="function")y(e,...r);else if(typeof e=="object")Array.isArray(e)?d(e):p(e);else throw new TypeError("Expected usable value, not `"+e+"`");return o&&(a.settings=Object.assign(a.settings||{},o)),n;function u(i){if(typeof i=="function")y(i);else if(typeof i=="object"){if(Array.isArray(i)){let[f,...c]=i;y(f,...c)}else p(i)}else throw new TypeError("Expected usable value, not `"+i+"`")}function p(i){d(i.plugins),i.settings&&(o=Object.assign(o||{},i.settings))}function d(i){let f=-1;if(i!=null)if(Array.isArray(i))for(;++f<i.length;){let c=i[f];u(c)}else throw new TypeError("Expected a list of plugins, not `"+i+"`")}function y(i,f){let c=-1,l;for(;++c<s.length;)if(s[c][0]===i){l=s[c];break}l?(E(l[1])&&E(f)&&(f=C(!0,l[1],f)),l[1]=f):s.push([...arguments])}}function F(e){n.freeze();let r=w(e),o=n.Parser;return h("parse",o),S(o,"parse")?new o(String(r),r).parse():o(String(r),r)}function N(e,r){n.freeze();let o=w(r),u=n.Compiler;return P("stringify",u),b(e),S(u,"compile")?new u(e,o).compile():u(e,o)}function L(e,r,o){if(b(e),n.freeze(),!o&&typeof r=="function"&&(o=r,r=void 0),!o)return new Promise(u);u(null,o);function u(p,d){t.run(e,w(r),y);function y(i,f,c){f=f||e,i?d(i):p?p(f):o(null,f,c)}}}function B(e,r){let o,u;return n.run(e,r,p),A("runSync","run",u),o;function p(d,y){z(d),o=y,u=!0}}function U(e,r){if(n.freeze(),h("process",n.Parser),P("process",n.Compiler),!r)return new Promise(o);o(null,r);function o(u,p){let d=w(e);n.run(n.parse(d),d,(i,f,c)=>{if(i||!f||!c)y(i);else{let l=n.stringify(f,c);l==null||(K(l)?c.value=l:c.result=l),y(i,c)}});function y(i,f){i||!f?p(i):u?u(f):r(null,f)}}}function D(e){let r;n.freeze(),h("processSync",n.Parser),P("processSync",n.Compiler);let o=w(e);return n.process(o,u),A("processSync","process",r),o;function u(p){r=!0,z(p)}}}function S(t,s){return typeof t=="function"&&t.prototype&&(H(t.prototype)||s in t.prototype)}function H(t){let s;for(s in t)if(T.call(t,s))return!0;return!1}function h(t,s){if(typeof s!="function")throw new TypeError("Cannot `"+t+"` without `Parser`")}function P(t,s){if(typeof s!="function")throw new TypeError("Cannot `"+t+"` without `Compiler`")}function x(t,s){if(s)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function b(t){if(!E(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function A(t,s,a){if(!a)throw new Error("`"+t+"` finished async. Use `"+s+"` instead")}function w(t){return J(t)?t:new q(t)}function J(t){return Boolean(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function K(t){return typeof t=="string"||Y(t)}export{G as unified};