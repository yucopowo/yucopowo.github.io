/* esm.sh - esbuild bundle(micromark@3.1.0/lib/parse) es2022 production */var kn=Object.defineProperty;var wn=(t,e)=>{for(var r in e)kn(t,r,{get:e[r],enumerable:!0})};import{combineExtensions as it}from"/cdn/v99/micromark-util-combine-extensions@1.0.0/es2022/micromark-util-combine-extensions.js";import{factorySpace as vn}from"/cdn/v99/micromark-factory-space@1.0.0/es2022/micromark-factory-space.js";import{markdownLineEnding as bn}from"/cdn/v99/micromark-util-character@1.1.0/es2022/micromark-util-character.js";var Z={tokenize:Cn};function Cn(t){let e=t.attempt(this.parser.constructs.contentInitial,n,i),r;return e;function n(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),vn(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),o(a)}function o(a){let p=t.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=p),r=p,l(a)}function l(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return bn(a)?(t.consume(a),t.exit("chunkText"),o):(t.consume(a),l)}}import{factorySpace as In}from"/cdn/v99/micromark-factory-space@1.0.0/es2022/micromark-factory-space.js";import{markdownLineEnding as yn}from"/cdn/v99/micromark-util-character@1.1.0/es2022/micromark-util-character.js";import{splice as $}from"/cdn/v99/micromark-util-chunked@1.0.0/es2022/micromark-util-chunked.js";var tn={tokenize:Sn},nn={tokenize:_n};function Sn(t){let e=this,r=[],n=0,i,o,l;return a;function a(s){if(n<r.length){let h=r[n];return e.containerState=h[1],t.attempt(h[0].continuation,p,d)(s)}return d(s)}function p(s){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&B();let h=e.events.length,g=h,m;for(;g--;)if(e.events[g][0]==="exit"&&e.events[g][1].type==="chunkFlow"){m=e.events[g][1].end;break}_(n);let w=h;for(;w<e.events.length;)e.events[w][1].end=Object.assign({},m),w++;return $(e.events,g+1,0,e.events.slice(h)),e.events.length=w,d(s)}return a(s)}function d(s){if(n===r.length){if(!i)return C(s);if(i.currentConstruct&&i.currentConstruct.concrete)return T(s);e.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(nn,u,b)(s)}function u(s){return i&&B(),_(n),C(s)}function b(s){return e.parser.lazy[e.now().line]=n!==r.length,l=e.now().offset,T(s)}function C(s){return e.containerState={},t.attempt(nn,z,T)(s)}function z(s){return n++,r.push([e.currentConstruct,e.containerState]),C(s)}function T(s){if(s===null){i&&B(),_(0),t.consume(s);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),F(s)}function F(s){if(s===null){S(t.exit("chunkFlow"),!0),_(0),t.consume(s);return}return yn(s)?(t.consume(s),S(t.exit("chunkFlow")),n=0,e.interrupt=void 0,a):(t.consume(s),F)}function S(s,h){let g=e.sliceStream(s);if(h&&g.push(null),s.previous=o,o&&(o.next=s),o=s,i.defineSkip(s.start),i.write(g),e.parser.lazy[s.start.line]){let m=i.events.length;for(;m--;)if(i.events[m][1].start.offset<l&&(!i.events[m][1].end||i.events[m][1].end.offset>l))return;let w=e.events.length,I=w,A,O;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(A){O=e.events[I][1].end;break}A=!0}for(_(n),m=w;m<e.events.length;)e.events[m][1].end=Object.assign({},O),m++;$(e.events,I+1,0,e.events.slice(w)),e.events.length=m}}function _(s){let h=r.length;for(;h-->s;){let g=r[h];e.containerState=g[1],g[0].exit.call(e,t)}r.length=s}function B(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function _n(t,e,r){return In(t,t.attempt(this.parser.constructs.document,e,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}import{blankLine as En,content as zn}from"/cdn/v99/micromark-core-commonmark@1.0.6/es2022/micromark-core-commonmark.js";import{factorySpace as An}from"/cdn/v99/micromark-factory-space@1.0.0/es2022/micromark-factory-space.js";import"/cdn/v99/micromark-util-character@1.1.0/es2022/micromark-util-character.js";var en={tokenize:Tn};function Tn(t){let e=this,r=t.attempt(En,n,t.attempt(this.parser.constructs.flowInitial,i,An(t,t.attempt(this.parser.constructs.flow,i,t.attempt(zn,i)),"linePrefix")));return r;function n(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,r}function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,r}}var rn={resolveAll:sn()},on=ln("string"),un=ln("text");function ln(t){return{tokenize:e,resolveAll:sn(t==="text"?Fn:void 0)};function e(r){let n=this,i=this.parser.constructs[t],o=r.attempt(i,l,a);return l;function l(u){return d(u)?o(u):a(u)}function a(u){if(u===null){r.consume(u);return}return r.enter("data"),r.consume(u),p}function p(u){return d(u)?(r.exit("data"),o(u)):(r.consume(u),p)}function d(u){if(u===null)return!0;let b=i[u],C=-1;if(b)for(;++C<b.length;){let z=b[C];if(!z.previous||z.previous.call(n,n.previous))return!0}return!1}}}function sn(t){return e;function e(r,n){let i=-1,o;for(;++i<=r.length;)o===void 0?r[i]&&r[i][1].type==="data"&&(o=i,i++):(!r[i]||r[i][1].type!=="data")&&(i!==o+2&&(r[o][1].end=r[i-1][1].end,r.splice(o+2,i-o-2),i=o+2),o=void 0);return t?t(r,n):r}}function Fn(t,e){let r=0;for(;++r<=t.length;)if((r===t.length||t[r][1].type==="lineEnding")&&t[r-1][1].type==="data"){let n=t[r-1][1],i=e.sliceStream(n),o=i.length,l=-1,a=0,p;for(;o--;){let d=i[o];if(typeof d=="string"){for(l=d.length;d.charCodeAt(l-1)===32;)a++,l--;if(l)break;l=-1}else if(d===-2)p=!0,a++;else if(d!==-1){o++;break}}if(a){let d={type:r===t.length||p||a<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-a,offset:n.end.offset-a,_index:n.start._index+o,_bufferIndex:o?l:n.start._bufferIndex+l},end:Object.assign({},n.end)};n.end=Object.assign({},d.start),n.start.offset===n.end.offset?Object.assign(n,d):(t.splice(r,0,["enter",d,e],["exit",d,e]),r+=2)}r++}return t}import{markdownLineEnding as Bn}from"/cdn/v99/micromark-util-character@1.1.0/es2022/micromark-util-character.js";import{push as On,splice as jn}from"/cdn/v99/micromark-util-chunked@1.0.0/es2022/micromark-util-chunked.js";import{resolveAll as Ln}from"/cdn/v99/micromark-util-resolve-all@1.0.0/es2022/micromark-util-resolve-all.js";function cn(t,e,r){let n=Object.assign(r?Object.assign({},r):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),i={},o=[],l=[],a=[],p=!0,d={consume:h,enter:g,exit:m,attempt:A(w),check:A(I),interrupt:A(I,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:F,sliceSerialize:T,now:S,defineSkip:_,write:z},b=e.tokenize.call(u,d),C;return e.resolveAll&&o.push(e),u;function z(c){return l=On(l,c),B(),l[l.length-1]!==null?[]:(O(e,0),u.events=Ln(o,u.events,u),u.events)}function T(c,f){return Nn(F(c),f)}function F(c){return Pn(l,c)}function S(){return Object.assign({},n)}function _(c){i[c.line]=c.column,D()}function B(){let c;for(;n._index<l.length;){let f=l[n._index];if(typeof f=="string")for(c=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===c&&n._bufferIndex<f.length;)s(f.charCodeAt(n._bufferIndex));else s(f)}}function s(c){p=void 0,C=c,b=b(c)}function h(c){Bn(c)?(n.line++,n.column=1,n.offset+=c===-3?2:1,D()):c!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===l[n._index].length&&(n._bufferIndex=-1,n._index++)),u.previous=c,p=!0}function g(c,f){let v=f||{};return v.type=c,v.start=S(),u.events.push(["enter",v,u]),a.push(v),v}function m(c){let f=a.pop();return f.end=S(),u.events.push(["exit",f,u]),f}function w(c,f){O(c,f.from)}function I(c,f){f.restore()}function A(c,f){return v;function v(y,M,j){let R,L,W,H;return Array.isArray(y)?Q(y):"tokenize"in y?Q([y]):mn(y);function mn(x){return U;function U(E){let P=E!==null&&x[E],N=E!==null&&x.null,gn=[...(Array.isArray(P)?P:P?[P]:[]),...(Array.isArray(N)?N:N?[N]:[])];return Q(gn)(E)}}function Q(x){return R=x,L=0,x.length===0?j:X(x[L])}function X(x){return U;function U(E){return H=xn(),W=x,x.partial||(u.currentConstruct=x),x.name&&u.parser.constructs.disable.null.includes(x.name)?Y(E):x.tokenize.call(f?Object.assign(Object.create(u),f):u,d,hn,Y)(E)}}function hn(x){return p=!0,c(W,H),M}function Y(x){return p=!0,H.restore(),++L<R.length?X(R[L]):j}}}function O(c,f){c.resolveAll&&!o.includes(c)&&o.push(c),c.resolve&&jn(u.events,f,u.events.length-f,c.resolve(u.events.slice(f),u)),c.resolveTo&&(u.events=c.resolveTo(u.events,u))}function xn(){let c=S(),f=u.previous,v=u.currentConstruct,y=u.events.length,M=Array.from(a);return{restore:j,from:y};function j(){n=c,u.previous=f,u.currentConstruct=v,u.events.length=y,a=M,D()}}function D(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function Pn(t,e){let r=e.start._index,n=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex,l;return r===i?l=[t[r].slice(n,o)]:(l=t.slice(r,i),n>-1&&(l[0]=l[0].slice(n)),o>0&&l.push(t[i].slice(0,o))),l}function Nn(t,e){let r=-1,n=[],i;for(;++r<t.length;){let o=t[r],l;if(typeof o=="string")l=o;else switch(o){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"\t";break}case-1:{if(!e&&i)continue;l=" ";break}default:l=String.fromCharCode(o);}i=o===-2,n.push(l)}return n.join("")}var V={};wn(V,{attentionMarkers:()=>et,contentInitial:()=>Xn,disable:()=>rt,document:()=>Wn,flow:()=>Zn,flowInitial:()=>Yn,insideSpan:()=>tt,string:()=>$n,text:()=>nt});import{attention as K,autolink as Dn,blockQuote as Mn,characterEscape as dn,characterReference as pn,codeFenced as an,codeIndented as q,codeText as Rn,definition as Hn,hardBreakEscape as Qn,headingAtx as Un,htmlFlow as qn,htmlText as Gn,labelEnd as Jn,labelStartImage as Kn,labelStartLink as Vn,lineEnding as G,list as k,setextUnderline as fn,thematicBreak as J}from"/cdn/v99/micromark-core-commonmark@1.0.6/es2022/micromark-core-commonmark.js";var Wn={[42]:k,[43]:k,[45]:k,[48]:k,[49]:k,[50]:k,[51]:k,[52]:k,[53]:k,[54]:k,[55]:k,[56]:k,[57]:k,[62]:Mn},Xn={[91]:Hn},Yn={[-2]:q,[-1]:q,[32]:q},Zn={[35]:Un,[42]:J,[45]:[fn,J],[60]:qn,[61]:fn,[95]:J,[96]:an,[126]:an},$n={[38]:pn,[92]:dn},nt={[-5]:G,[-4]:G,[-3]:G,[33]:Kn,[38]:pn,[42]:K,[60]:[Dn,Gn],[91]:Vn,[92]:[Qn,dn],[93]:Jn,[95]:K,[96]:Rn},tt={null:[K,rn]},et={null:[42,95]},rt={null:[]};function Ft(t={}){let e=it([V].concat(t.extensions||[])),r={defined:[],lazy:{},constructs:e,content:n(Z),document:n(tn),flow:n(en),string:n(on),text:n(un)};return r;function n(i){return o;function o(l){return cn(r,i,l)}}}export{Ft as parse};