/* esm.sh - esbuild bundle(estree-util-build-jsx@2.2.0) es2022 production */import{walk as w}from"/cdn/v99/estree-walker@3.0.1/es2022/estree-walker.js";import{name as S}from"/cdn/v99/estree-util-is-identifier-name@2.0.1/es2022/estree-util-is-identifier-name.js";var I=/@(jsx|jsxFrag|jsxImportSource|jsxRuntime)\s+(\S+)/g;function k(t,e={}){let s=e.runtime==="automatic",i={},n={};return w(t,{enter(a){if(a.type==="Program"){let l=a.comments||[],f=-1;for(;++f<l.length;){I.lastIndex=0;let p=I.exec(l[f].value);for(;p;)i[p[1]]=p[2],p=I.exec(l[f].value)}if(i.jsxRuntime)if(i.jsxRuntime==="automatic"){if(s=!0,i.jsx)throw new Error("Unexpected `@jsx` pragma w/ automatic runtime");if(i.jsxFrag)throw new Error("Unexpected `@jsxFrag` pragma w/ automatic runtime")}else if(i.jsxRuntime==="classic"){if(s=!1,i.jsxImportSource)throw new Error("Unexpected `@jsxImportSource` w/ classic runtime")}else throw new Error("Unexpected `jsxRuntime` `"+i.jsxRuntime+"`, expected `automatic` or `classic`")}},leave(a){if(a.type==="Program"){let r=[];n.fragment&&r.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"Fragment"},local:{type:"Identifier",name:"_Fragment"}}),n.jsx&&r.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsx"},local:{type:"Identifier",name:"_jsx"}}),n.jsxs&&r.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxs"},local:{type:"Identifier",name:"_jsxs"}}),n.jsxDEV&&r.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxDEV"},local:{type:"Identifier",name:"_jsxDEV"}}),r.length>0&&a.body.unshift({type:"ImportDeclaration",specifiers:r,source:{type:"Literal",value:(i.jsxImportSource||e.importSource||"react")+(e.development?"/jsx-dev-runtime":"/jsx-runtime")}})}if(a.type!=="JSXElement"&&a.type!=="JSXFragment")return;let l=[],f=-1;for(;++f<a.children.length;){let r=a.children[f];if(r.type==="JSXExpressionContainer")r.expression.type!=="JSXEmptyExpression"&&l.push(r.expression);else if(r.type==="JSXText"){let u=r.value.replace(/\t/g," ").replace(/ *(\r?\n|\r) */g,`
`).replace(/\n+/g,`
`).replace(/\n+$/,"").replace(/\n/g," ");u&&l.push(h(r,{type:"Literal",value:u}))}else l.push(r)}let p,c=[],m=[],o=[],g;if(a.type==="JSXElement"){p=j(a.openingElement.name),p.type==="Identifier"&&/^[a-z]/.test(p.name)&&(p=h(p,{type:"Literal",value:p.name}));let r,u=a.openingElement.attributes,b=-1;for(;++b<u.length;){let E=u[b];if(E.type==="JSXSpreadAttribute")c.length>0&&(m.push({type:"ObjectExpression",properties:c}),c=[]),m.push(E.argument),r=!0;else{let d=L(E);if(s&&d.key.type==="Identifier"&&d.key.name==="key"){if(r)throw new Error("Expected `key` to come before any spread expressions");g=d.value}else c.push(d)}}}else s?(n.fragment=!0,p={type:"Identifier",name:"_Fragment"}):p=v(i.jsxFrag||e.pragmaFrag||"React.Fragment");s?l.length>0&&c.push({type:"Property",key:{type:"Identifier",name:"children"},value:l.length>1?{type:"ArrayExpression",elements:l}:l[0],kind:"init",method:!1,shorthand:!1,computed:!1}):o=l,c.length>0&&m.push({type:"ObjectExpression",properties:c});let y,x;if(m.length>1?(m[0].type!=="ObjectExpression"&&m.unshift({type:"ObjectExpression",properties:[]}),y={type:"CallExpression",callee:v("Object.assign"),arguments:m,optional:!1}):m.length>0&&(y=m[0]),s){o.push(y||{type:"ObjectExpression",properties:[]}),g?o.push(g):e.development&&o.push({type:"Identifier",name:"undefined"});let r=l.length>1;if(e.development){n.jsxDEV=!0,x={type:"Identifier",name:"_jsxDEV"},o.push({type:"Literal",value:r});let u={type:"ObjectExpression",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"fileName"},value:{type:"Literal",value:e.filePath||"<source.js>"}}]};a.loc&&u.properties.push({type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"lineNumber"},value:{type:"Literal",value:a.loc.start.line}},{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"columnNumber"},value:{type:"Literal",value:a.loc.start.column+1}}),o.push(u,{type:"ThisExpression"})}else r?(n.jsxs=!0,x={type:"Identifier",name:"_jsxs"}):(n.jsx=!0,x={type:"Identifier",name:"_jsx"})}else(y||o.length>0)&&o.unshift(y||{type:"Literal",value:null}),x=v(i.jsx||e.pragma||"React.createElement");o.unshift(p),this.replace(h(a,{type:"CallExpression",callee:x,arguments:o,optional:!1}))}}),t}function L(t){let e;return t.value?t.value.type==="JSXExpressionContainer"?e=t.value.expression:(e=t.value,delete e.raw):e={type:"Literal",value:!0},h(t,{type:"Property",key:j(t.name),value:e,kind:"init",method:!1,shorthand:!1,computed:!1})}function j(t){let e;if(t.type==="JSXMemberExpression"){let s=j(t.property);e={type:"MemberExpression",object:j(t.object),property:s,computed:s.type==="Literal",optional:!1}}else t.type==="JSXNamespacedName"?e={type:"Literal",value:t.namespace.name+":"+t.name.name}:e=S(t.name)?{type:"Identifier",name:t.name}:{type:"Literal",value:t.name};return h(t,e)}function v(t){let e=t.split("."),s=-1,i;for(;++s<e.length;){let n=S(e[s])?{type:"Identifier",name:e[s]}:{type:"Literal",value:e[s]};i=i?{type:"MemberExpression",object:i,property:n,computed:Boolean(s&&n.type==="Literal"),optional:!1}:n}return i}function h(t,e){let s=["start","end","loc","range","comments"],i=-1;for(;++i<s.length;){let n=s[i];n in t&&(e[n]=t[n])}return e}export{k as buildJsx};